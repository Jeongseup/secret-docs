---
description: >-
  An example of how to use Secret VRF to fetch random numbers via IBC between
  Secret and Juno testnet
---

# Cross-Chain (Juno) randomness

_Note: This documentation is currently in progress. 7.5.23_

## Cross-Chain Random Numbers Demo

This documentation serves as a demo on how to **use cross-chain random numbers from Secret Network testnet to Juno testnet via IBC**. The demo repository [can be cloned here](https://github.com/scrtlabs/examples/tree/master/secret-ibc-rng-template).&#x20;

The system consists of two Juno contracts and one Secret contract:

* **Consumer Contract**: A Juno contract that uses the random numbers generated by the Secret proxy contract.
* **Consumer Proxy Contract:**  Executes the `RequestRandom` function; responsible for fetching the random number from Juno via IBC.
* **Proxy Contract**: Responsible for fetching the random number from Secret Network via IBC.

<figure><img src="../../../.gitbook/assets/ibc-random.png" alt=""><figcaption></figcaption></figure>

The Secret proxy contract will produce a _different, non-predictable_ number for each request it receives. You can read more about random numbers on Secret Network in the [technical specification of this feature.](../../secret-contract-fundamentals/available-native-features-modules/secret-vrf-on-chain-randomness.md)

### IBC Fundamentals

To connect CosmWasm contracts over IBC you must establish an IBC channel between them. The IBC channel establishment process uses a four way handshake. Here is a summary of the steps:

1. `OpenInit` Hello chain B, here is information that you can use to verify I am chain A. Do you have information I can use?
2. `OpenTry` Hello chain A, I have verified that you are who you say you are. Here is my verification information.
3. `OpenAck` Hello chain B. Thank you for that information I have verified you are who you say you are. I am now ready to talk.
4. `OpenConfirm` Hello chain A. I am also now ready to talk.

Once the handshake has been completed a channel will be established that the ibc messages may be sent over. In order to do a handshake and receive IBC messages your contract must implement the following entry points (which are implemented in our proxy contract):

1. `ibc_channel_open` - Handles the `OpenInit` and `OpenTry` handshake steps.
2. `ibc_channel_connect` - Handles the `OpenAck` and `OpenConfirm` handshake steps.
3. `ibc_channel_close` - Handles the closing of an IBC channel by the counterparty.
4. `ibc_packet_receive` - Handles receiving IBC packets from the counter-party.
5. `ibc_packet_ack` - Handles ACK messages from the counter-party.&#x20;
6. `ibc_packet_timeout` - Handles packet timeouts.

{% hint style="info" %}
[Here is a great repo](https://github.com/0xekez/cw-ibc-example) to learn more about IBC fundamentals [ðŸŽ‰](https://emojipedia.org/party-popper/)
{% endhint %}

_Note: This documentation is currently in progress. 7.5.23_

